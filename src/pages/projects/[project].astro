---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
    const projects = import.meta.glob('../../project-descriptions/*/descripcion.md');

    return Object.keys(projects).map(path => {
        const parts = path.split('/');
        const folder = parts[parts.length - 2];
        return {
            params: { project: folder }
        };
    });
}

const { project } = Astro.params;

const esModules = import.meta.glob('../../project-descriptions/*/descripcion.md');
const enModules = import.meta.glob('../../project-descriptions/*/descripcion.en.md');

const esModule = await esModules[`../../project-descriptions/${project}/descripcion.md`]();
const enModule = await enModules[`../../project-descriptions/${project}/descripcion.en.md`]();

const ESContent = esModule.default;
const ENContent = enModule.default;

const translations = {
    backToProjects: { en: '← Back to Evidences', es: '← Volver a Evidencias' }
};
---

<Layout title={`${project} | Paula Marín`}>
	<Header />
	
	<main class="min-h-screen px-4 sm:px-6 md:px-6">
		<article class="max-w-3xl mx-auto pt-24 sm:pt-32 md:pt-48 pb-16 sm:pb-24 fade-in">
			
			<a href="/projects" class="text-sm font-medium text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors mb-8 inline-block" data-en={translations.backToProjects.en} data-es={translations.backToProjects.es}>
				{translations.backToProjects.en}
			</a>

			<section class="space-y-6 text-gray-700 dark:text-gray-300 leading-relaxed">
				<div class="locale-es">
					<ESContent />
				</div>
				<div class="locale-en">
					<ENContent />
				</div>
			</section>
		</article>
	</main>

	<Footer />

	<script>
		document.addEventListener('DOMContentLoaded', () => {
			document.querySelector('.fade-in')?.classList.add('visible');
		});
	</script>
</Layout>

<style>
	@reference "../../styles/global.css";
</style>
